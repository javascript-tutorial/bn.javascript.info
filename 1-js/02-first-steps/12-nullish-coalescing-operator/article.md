# নাল-ঈশ কোয়েলেসিং অপারেটর '??'

[recent browser="new"]

এই নিবন্ধে আমরা কোন একটা এক্সপ্রেশান কে তখনি "সংজ্ঞায়িত" বলবো যখন সেটা `নাল` অথবা `অসঙ্গায়িত` কোনটাই হবে না ।

নাল-ঈশ কোয়েলেসিং অপারেটর কে দুইটি প্রশ্নবোধক চিহ্ন দ্বারা এভাবে লেখা হয় `??`।

`a ?? b` এটার উত্তর হবে :

- যখন `a` সংজ্ঞায়িত, তখন `a`,
- যখন `a` সংজ্ঞায়িত না, তখন `b`।

অন্যকথায় বলতে গেলে, যদি প্রথম আর্গুমেন্ট `নাল/অসঙ্গায়িত` না হয় তাহলে `??` এটা প্রথম আর্গুমেন্ট রিটার্ন করবে । তানাহলে , দ্বিতীয়টা রিটার্ন করবে।

নাল-ঈশ কোয়েলেসিং অপারেটরটা নতুন কিছু নয়। এটা শুধুমাত্র একটা সুন্দর সিনট্যাক্স যেটা দুইটা মানের মধ্যে প্রথম সংজ্ঞায়িত মানটা বের করে দেয়।

আমরা ইতোমধ্যে জানা এমন অপারেটর দ্বারা `result = a ?? b` এই এক্সপ্রেশেন টাকে লিখতে পারি, এই ভাবেঃ

```js
result = a !== null && a !== undefined ? a : b;
```

সম্ভাব্য অসঙ্গায়িত ভ্যরিয়াবল এর ডিফল্ট মান সরবরাহ করা, `??` এটার সাধারণ ব্যাবহারের ক্ষেত্র ।

উদাহরণ হিসেবে বলা যায়, যদি `user` defined না হয় তাহলে আমরা `Anonymous`দেখাবো।

```js run
let user;

alert(user ?? "Anonymous"); // Anonymous
```

অবশ্য, যদি `user` এ `নাল/অসঙ্গায়িত` ছাড়া অন্য কোন মান থাকে তাহলে আমরা `user` কেই দেখবো:

```js run
let user = "John";

alert(user ?? "Anonymous"); // John
```

একটা তালিকা থেকে প্রথম মান, যেটা `নাল/অসঙ্গায়িত` হবে না সেটাও আমরা `??` এর পর্যায়াক্রম ব্যবহার করে বের করতে পারি ।

মনে করি আমাদের কাছে একজন ব্যবহারকারী এর তথ্য আছে `firstName`, `lastName` অথবা `nickName` ভ্যারিয়েবল এ। সব গুলোর মানই অসঙ্গায়িত হতে পারি যদি ব্যবহারকারী কোন তথ্য না দেয়।

আমরা চাই যেকোনো একটি ভ্যারিয়েবল নিয়ে ব্যবহারকারীর নাম দেখাতে, অথবা "Anonymous" দেখাতে যদি সব ভ্যারিয়েবল অসঙ্গায়িত হয় ।

এটা করার জন্যে `??` অপারেটর টা ব্যবহার করা যাক:

```js run
let firstName = null;
let lastName = null;
let nickName = "Supercoder";

// প্রথম সংজ্ঞায়িত মানটি দেখাবে:
*!*
alert(firstName ?? lastName ?? nickName ?? "Anonymous"); // Supercoder
*/!*
```

## || এর সাথে তুলনা

অর `||` অপারেটর টা `??` এই অপারেটর এর মতই ব্যবহার করা যাবে,যা [পূর্ববর্তী অধ্যায়](info:logical-operators#or-finds-the-first-truthy-value) এ বর্ণনা করা হয়েছে।

উদাহরণ স্বরূপ, উপরের কোড এ আমরা `??` এটার পরিবর্তে `||` এটা ব্যবহার করলেও একই ফল পাওয়া যাবে:

```js run
let firstName = null;
let lastName = null;
let nickName = "Supercoder";

// প্রথম ট্রুথি মান দেখাবে:
*!*
alert(firstName || lastName || nickName || "Anonymous"); // Supercoder
*/!*
```

অর `||` অপারেটর জাভাস্ক্রিপ্ট এর শুরু থেকেই ছিল, তাই ডেভোলপাররা এটিই ব্যবহার করে আসছে অনেক লম্বা সময় ধরে ।

অপরপক্ষে কোয়েলেসিং অপারেটর `??` সাম্প্রতিক সময়ে কেবল মাত্রই যুক্ত হল জাভাস্ক্রিপ্ট এ এবং এর কারণ হলে `||` এটা দ্বারা মানুষজন খুশি ছিল না।

দুইটার মধ্যে গুরুত্বপূর্ণ পার্থক্য হল:

- `||` এটা রিটার্ন করে প্রথম _ট্রুথি_ মান।
- `??` এটা রিটার্ন করে প্রথম _সংজ্ঞায়িত_ মান।

অন্য কথায় বলতে গেলে, `||` এই অপারেটর `false`, `0`, an empty string `""` and `নাল/অসঙ্গায়িত`, এগুলোর মধ্যে কোন পার্থক্য করে না। এর এগুলা সব একই -- ফলছি ভ্যালু। এগুলোর কোনটা যদি `||` এই অপারেটর এর প্রথম আর্গুমেন্ট হিসেবে থাকে তাহলে আমরা ফলাফল হিসেবে দ্বিতীয় আর্গুমেন্ট টা পাবো।

বাস্তবিক ক্ষেত্রে, আমরা হয়তোবা ডিফল্ট চাইব তখনি যখন ভ্যরিয়েবল এর মান `নাল/অসঙ্গায়িত` হয়। অর্থাৎ মান আসলে অজানা বা ঠিক করে দেওয়া হয় নি ।

উদাহরণস্বরূপ, এটি বিবেচনা করি:

```js run
let height = 0;

alert(height || 100); // 100
alert(height ?? 100); // 0
```

- `height || 100` এটি দেখে যে `height` ফলছি ভ্যালু কিনা এবং ফলছি ভ্যালু হিসেবেই পায় ।
  - তাই উত্তর হল দ্বিতীয় আর্গুমেন্ট, `100`।
- `height ?? 100` এটি দেখে যে `height` `নাল/অসঙ্গায়িত` কিনা এবং দেখে যে এটি এমন না ।
  - তাই উত্তর হিসেবে `height` এর মান দেখায়, যেটা হল `0`।

যদি শূন্য উচ্চতা একটি বৈধ মান হয়ে যেটি কিনা ডিফল্ট মান দ্বারা পরিবর্তিত হবে না সেক্ষেত্রে `??` এই অপারেটর টা যথার্থ কাজ করছে ।

## প্রাধান্য

`??` অপারেটর এর প্রাধান্য কিছুটা কম। [MDN table](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table) এ `৫` নাম্বার। । তাই `??` অপারেটর, `=` এবং `?` এর আগে মুল্যায়িত হবে, কিন্তু অন্যান্য বেশীর ভাগ অপারেশন, যেমন `+`, `*`, এর পরে মুল্যায়িত হবে।

তাই আমরা যদি `??` এই এক্সপ্রেশন এর মাধ্যমে কোন ভ্যালু নির্বাচন করতে চাই তাহলে বন্ধনীর ব্যবহার বিবেচনা করা উচিত:

```js run
let height = null;
let width = null;

// গুরুত্বপূর্ণ : বন্ধনী ব্যবহার করুন
let area = (height ?? 100) * (width ?? 50);

alert(area); // ৫০০০
```

অন্যথায়, বন্ধনী উপেক্ষা করি তাহলে `*`, `??` থেকে বেশী প্রাধান্য পাবে, এটি আগে কার্যকর কর হবে যা ভুল ফলাফল দিবে ।

```js
// বন্ধনী ব্যতীত
let area = height ?? 100 * width ?? 50;

// ...এটির মতই কাজ করে (যা খুব সম্ভবত আমরা চাই না):
let area = height ?? 100 * width ?? 50;
```

### && or || এর সাথে ?? ব্যবহার

নিরাপত্তা জনিত কারণে, যদি বন্ধনী দ্বারা প্রাধান্য নির্ধারণ করে দেওয়া না হয়, তাহলে জাভাস্ক্রিপ্ট `??` টাকে `&&` এবং `||` অপারেটর এর সাথে ব্যবহার করাকে নিষেধ করে।

নিচের কোড সিনট্যাক্স ইরর দেখাবে:

```js run
let x = 1 && 2 ?? 3; // সিনট্যাক্স ইরর
```

এটির সীমাবদ্ধতা অবশ্যই তর্কসাপেক্ষ কিন্তু যখন মানুষজন `||` এর পরিবর্তে `??` ব্যবহার করা শুরু করল তখন প্রোগ্রামিং ভুল দুর করার জন্যে এটি ল্যাঙ্গুয়েজ স্পেছিফিকেশন এ যুক্ত করা হয়।

ভুল এড়ানোর জন্যে পরিষ্কারভাবে বর্ণিত বন্ধনী ব্যবহার করুন:

```js run
*!*
let x = (1 && 2) ?? 3; // কাজ করে
*/!*

alert(x); // ২
```

## সারসংক্ষেপ

- একটি তালিকা থেকে সংজ্ঞায়িত মান বের করার জন্যে একটি সংক্ষিপ্ত উপায় দেয় নাল-ঈশ কোয়েলেসিং অপারেটর `??`।

  এটি ভ্যারিয়েবল কে ডিফল্ট মান এসাইন করার জন্যে ব্যবহার করা হয়:

  ```js
  // height=100 নির্ধারণ করবে, যদি height নাল অথবা অসঙ্গায়িত হয় 
  height = height ?? 100;
  ```

- `??` অপারেটর খুবই কম প্রাধান্যসম্পন্ন , `?` and `=` থেকে একটু বেশী প্রাধান্য পায় তাই একটি এক্সপ্রেশান এ এটি ব্যবহার এর সময় বন্ধনীর ব্যবহার বিবেচনা করা উচিত।
- পরিষ্কারভাবে বর্ণিত বন্ধনী ছাড়া `||` অথবা `&&` সাথে এটি ব্যবহার করা নিষিদ্ধ।
